Install folder on NAS
cd gitrepos/NasFileSyncRestService/nas_samba_rest/

https://uwsgi-docs.readthedocs.io/en/latest/WSGIquickstart.html
https://uwsgi-docs.readthedocs.io/en/latest/Options.html?highlight=manage-script-name


prerequisites for Python
https://geektechstuff.com/2019/01/14/creating-a-virtual-python-environment-python/
https://www.techcoil.com/blog/how-to-use-python-3-virtual-environments-to-run-python-3-applications-on-your-raspberry-pi/

Install PIP
sudo apt install python3-pip
sudo apt install python3-venv

Install virtual environment for my Python application in install app folder

python3 -m venv ./venv

Activate virtual env
source ./venv/bin/activate

Install in venv The container uWSGI for Flask app.
pip install uwsgi flask
pip install flask-cors

Create a log folder
mkdir logs

Test flask app
(venv) > python myproject.py

from terminal run http request
curl -d path=films http://nas.local:5001/folderItems
curl -d path=films http://192.168.0.24:5001/folderItems

Deactivate virtual env
(venv) > deactivate

standalone deploy Flask application
https://uwsgi-docs.readthedocs.io/en/latest/Options.html

source ./venv/bin/activate

uwsgi --socket 192.168.0.24:5001 --protocol=http -w app:app

Or create a uwsgi.ini file
and launche it
uwsgi --ini uwsgi.ini

Multi task , monitoring on port 9191 accessed over Telnet
uwsgi --socket 127.0.0.1:3031 --wsgi-file myflaskapp.py --callable app --processes 4 --threads 2 --stats 127.0.0.1:9191

This will spawn 4 processes (each with 2 threads),
a master process (will respawn your processes when they die) and the HTTP router (seen before).

//TODO start uWSGI on restarting system, use systemd configuration

//Run uWSGI as HTTP router
https://flask.palletsprojects.com/en/1.1.x/deploying/uwsgi/
https://uwsgi-docs.readthedocs.io/en/latest/HTTP.html#the-uwsgi-http-https-router

uwsgi --http 127.0.0.1:5000 --module myproject:app

uwsgi -s /tmp/yourapplication.sock --manage-script-name --mount /yourapplication=myapp:app

-s is shortcut for uwsgi-socket


Tutorial
https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uwsgi-and-nginx-on-ubuntu-20-04
https://www.raspberrypi-spy.co.uk/2018/12/running-flask-under-nginx-raspberry-pi/